# Tomcat
server:
  port: 9201

# Spring
spring:
  main:
    allow-bean-definition-overriding: true
  application:
    # 应用名称
    name: towelove-system
  profiles:
    # 环境配置
    active: dev
  cloud:
    nacos:
      discovery:
        # 服务注册地址
        server-addr: 123.249.97.220:8848
      config:
        # 配置中心地址
        server-addr: 123.249.97.220:8848
        # 配置文件格式
        file-extension: yaml
        # 共享配置
        shared-configs[0]:
          data-id: towelove-base-dev.yaml
          refresh: true
        shared-configs[1]:
          data-id: towelove-mysql-dev.yaml
          refresh: true
        shared-configs[2]:
          data-id: towelove-redis-dev.yaml
          refresh: true
    # Spring Cloud Stream 配置项，对应 BindingServiceProperties 类
    stream:
      function: # 这里面要么声明的是消费者类 要么就是消费者类中的多个方法
          # 如果只有一个方法 那么只需要声明一个消费者类
        # 但是如果是多个方法 就需要吧方法名称都声明出来
        definition: smsSendConsumer;mailSendConsumer;sendSmsToAdmin;sendSmsToUser;
        # 需要确保消费者类的名称和这里一样
#        definition: mailSendConsumer;smsSendConsumer; # 需要确保消费者类的名称和这里一样
      # Binding 配置项，对应 BindingProperties Map
      bindings:

        sendSmsToAdmin-out-0: # 配置生产者
          destination: admin_sms_send
        sendSmsToAdmin-in-0:
          destination: admin_sms_send
          group: send_sms_admin_group
        sendSmsToUser-out-0: # 配置生产者
          destination: user_sms_send
        sendSmsToUser-in-0:
          destination: user_sms_send
          group: send_sms_user_group

        smsSend-out-0:
          destination: sms_send
        smsSendConsumer-in-0: # 配置消费者
          destination: sms_send
          group: system_sms_send_consumer_group

        mailSend-out-0: # rocketmq-->broker ---> xxl-job
          destination: system_mail_send # topic
        mailSendConsumer-in-0: # 需要确保消费者类的名称和这里一样 ---> 一个消费模块
          destination: system_mail_send
          group: system_mail_send_consumer_group

      # Spring Cloud Stream RocketMQ 配置项
      rocketmq:
        # RocketMQ Binder 配置项，对应 RocketMQBinderConfigurationProperties 类
        binder:
          name-server: 123.249.111.175:9876 # RocketMQ Namesrv 地址
        #          access-key: # 用户名
        #          secret-key:  # 密码
        default: # 默认 bindings 全局配置
          producer: # RocketMQ Producer 配置项，对应 RocketMQProducerProperties 类
            group: system_producer_group # 生产者分组
            send-type: SYNC # 发送模式，SYNC 同步
    bus:
      enabled: true # 是否开启，默认为 true
      id: ${spring.application.name}:${server.port} # 编号，Spring Cloud Alibaba 建议使用“应用:端口”的格式
      destination: springCloudBus # 目标消息队列，默认为 springCloudBus